# è¡Œèµ°æŽ¢ç´¢å¥–åŠ±åŠŸèƒ½æ–¹æ¡ˆ

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

çŽ©å®¶ç‚¹å‡»"æŽ¢ç´¢"æŒ‰é’®åŽï¼Œç³»ç»Ÿå¼€å§‹è¿½è¸ªçŽ©å®¶çš„è¡Œèµ°è½¨è¿¹ã€‚æŽ¢ç´¢ç»“æŸæ—¶ï¼Œæ ¹æ®è¡Œèµ°è·ç¦»è®¡ç®—å¥–åŠ±ç‰©å“ï¼Œç‰©å“å­˜å…¥çŽ©å®¶èƒŒåŒ…ã€‚

**æ ¸å¿ƒå…¬å¼**ï¼š`å¥–åŠ± = f(è¡Œèµ°è·ç¦»)`ï¼Œä¸Žæ—¶é•¿æ— å…³ã€‚

---

## äºŒã€åŠŸèƒ½æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç©ºé—²çŠ¶æ€                              â”‚
â”‚                    åœ°å›¾æ˜¾ç¤º"æŽ¢ç´¢"æŒ‰é’®                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                         ç‚¹å‡»"æŽ¢ç´¢"
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æŽ¢ç´¢è¿›è¡Œä¸­                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç³»ç»ŸæŒç»­åšçš„äº‹æƒ…ï¼š                                    â”‚   â”‚
â”‚  â”‚  1. ç›‘å¬GPSä½ç½®æ›´æ–°                                   â”‚   â”‚
â”‚  â”‚  2. è®¡ç®—ä¸Žä¸Šä¸€ä¸ªç‚¹çš„è·ç¦»ï¼Œç´¯åŠ åˆ°æ€»è·ç¦»                  â”‚   â”‚
â”‚  â”‚  3. è®¡æ—¶å™¨æ¯ç§’+1ï¼Œæ›´æ–°æŽ¢ç´¢æ—¶é•¿                         â”‚   â”‚
â”‚  â”‚  4. UIå®žæ—¶æ˜¾ç¤ºï¼šå·²èµ°xxxç±³ï¼Œå·²æŽ¢ç´¢xxåˆ†xxç§’              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                    æŒ‰é’®å˜æˆ"ç»“æŸæŽ¢ç´¢"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                        ç‚¹å‡»"ç»“æŸæŽ¢ç´¢"
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç»“ç®—é˜¶æ®µ                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. åœæ­¢GPSè¿½è¸ªå’Œè®¡æ—¶å™¨                               â”‚   â”‚
â”‚  â”‚  2. æ ¹æ®æ€»è·ç¦»ç¡®å®šå¥–åŠ±ç­‰çº§                            â”‚   â”‚
â”‚  â”‚  3. æ ¹æ®ç­‰çº§éšæœºç”Ÿæˆç‰©å“ï¼ˆæ•°é‡+ç¨€æœ‰åº¦ï¼‰                â”‚   â”‚
â”‚  â”‚  4. ç‰©å“å­˜å…¥èƒŒåŒ…æ•°æ®åº“                                â”‚   â”‚
â”‚  â”‚  5. æŽ¢ç´¢è®°å½•å­˜å…¥æ•°æ®åº“                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æŽ¢ç´¢ç»“æžœé¡µé¢                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æŽ¢ç´¢å®Œæˆï¼                                           â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  æœ¬æ¬¡è¡Œèµ°ï¼š1,234 ç±³                                   â”‚   â”‚
â”‚  â”‚  æŽ¢ç´¢æ—¶é•¿ï¼š15 åˆ† 32 ç§’                                â”‚   â”‚
â”‚  â”‚  å¥–åŠ±ç­‰çº§ï¼šðŸ¥ˆ é“¶çº§                                    â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  èŽ·å¾—ç‰©å“ï¼š                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                                    â”‚   â”‚
â”‚  â”‚  â”‚ ç½å¤´ â”‚ â”‚ ç»·å¸¦ â”‚                                    â”‚   â”‚
â”‚  â”‚  â”‚ x2  â”‚ â”‚ x1  â”‚                                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                                    â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  [ç¡®è®¤] â† ç‚¹å‡»åŽè¿”å›žåœ°å›¾                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€è·ç¦»è®¡ç®—åŽŸç†

### 3.1 GPSè½¨è¿¹ç‚¹ç´¯åŠ 

```
ä½ç½®ç‚¹åºåˆ—ï¼šP1 â†’ P2 â†’ P3 â†’ P4 â†’ ...

æ€»è·ç¦» = distance(P1, P2) + distance(P2, P3) + distance(P3, P4) + ...
```

æ¯æ¬¡æ”¶åˆ°æ–°çš„GPSä½ç½®æ›´æ–°æ—¶ï¼š
1. è®¡ç®—æ–°ä½ç½®ä¸Žä¸Šä¸€ä¸ªä½ç½®çš„è·ç¦»
2. ç´¯åŠ åˆ°æ€»è·ç¦»
3. æ›´æ–°"ä¸Šä¸€ä¸ªä½ç½®"ä¸ºå½“å‰ä½ç½®

### 3.2 ä¸¤ç‚¹é—´è·ç¦»è®¡ç®—

ä½¿ç”¨ **Haversineå…¬å¼** è®¡ç®—çƒé¢ä¸Šä¸¤ç‚¹çš„è·ç¦»ï¼š

```
ç»™å®šä¸¤ä¸ªåæ ‡ç‚¹ï¼š
  ç‚¹A: (lat1, lng1)
  ç‚¹B: (lat2, lng2)

è·ç¦» = 2 Ã— R Ã— arcsin(âˆš(sinÂ²(Î”lat/2) + cos(lat1) Ã— cos(lat2) Ã— sinÂ²(Î”lng/2)))

å…¶ä¸­ R = 6371000 ç±³ï¼ˆåœ°çƒåŠå¾„ï¼‰
```

iOSçš„CoreLocationå·²ç»å°è£…å¥½äº†è¿™ä¸ªè®¡ç®—ï¼š`location1.distance(from: location2)`

### 3.3 è¿‡æ»¤æ— æ•ˆä½ç½®

GPSæœ‰æ—¶ä¼šè·³ç‚¹ï¼ˆçªç„¶è·³åˆ°å¾ˆè¿œçš„åœ°æ–¹ï¼‰ï¼Œéœ€è¦è¿‡æ»¤ï¼š

| æ£€æŸ¥é¡¹ | é˜ˆå€¼ | å¤„ç† |
|-------|-----|------|
| ç²¾åº¦å¤ªå·® | horizontalAccuracy > 50ç±³ | å¿½ç•¥è¿™ä¸ªç‚¹ |
| è·ç¦»è·³å˜ | ä¸Žä¸Šä¸€ç‚¹è·ç¦» > 100ç±³ | å¿½ç•¥è¿™ä¸ªç‚¹ |
| æ—¶é—´é—´éš”å¤ªçŸ­ | < 1ç§’ | å¿½ç•¥è¿™ä¸ªç‚¹ |

---

## å››ã€å¥–åŠ±è®¡ç®—åŽŸç†

### 4.1 å¥–åŠ±ç­‰çº§åˆ’åˆ†

| è¡Œèµ°è·ç¦» | ç­‰çº§ | ç­‰çº§åç§° |
|---------|-----|---------|
| 0 - 200ç±³ | æ— å¥–åŠ± | - |
| 200 - 500ç±³ | é“œçº§ | Bronze |
| 500 - 1000ç±³ | é“¶çº§ | Silver |
| 1000 - 2000ç±³ | é‡‘çº§ | Gold |
| 2000ç±³ä»¥ä¸Š | é’»çŸ³çº§ | Diamond |

### 4.2 ç‰©å“ç”Ÿæˆè§„åˆ™

æ¯ä¸ªç­‰çº§å¯¹åº”çš„å¥–åŠ±å‚æ•°ï¼š

| ç­‰çº§ | ç‰©å“æ•°é‡ | æ™®é€šæ¦‚çŽ‡ | ç¨€æœ‰æ¦‚çŽ‡ | å²è¯—æ¦‚çŽ‡ |
|-----|---------|---------|---------|---------|
| é“œçº§ | 1ä¸ª | 90% | 10% | 0% |
| é“¶çº§ | 2ä¸ª | 70% | 25% | 5% |
| é‡‘çº§ | 3ä¸ª | 50% | 35% | 15% |
| é’»çŸ³çº§ | 5ä¸ª | 30% | 40% | 30% |

### 4.3 ç‰©å“æ± è®¾è®¡

```
æ™®é€šç‰©å“æ± ï¼ˆCommonï¼‰ï¼š
  - ç½å¤´ã€é¥¼å¹²ã€çº¯å‡€æ°´ã€ç»·å¸¦ã€ç«æŸ´...

ç¨€æœ‰ç‰©å“æ± ï¼ˆRareï¼‰ï¼š
  - æ€¥æ•‘åŒ…ã€æ‰‹ç”µç­’ã€æ”¶éŸ³æœºã€å·¥å…·ç®±...

å²è¯—ç‰©å“æ± ï¼ˆEpicï¼‰ï¼š
  - æŠ—ç”Ÿç´ ã€å‘ç”µæœºé›¶ä»¶ã€é˜²æ¯’é¢å…·...
```

### 4.4 ç”Ÿæˆæµç¨‹

```
1. æ ¹æ®è·ç¦»ç¡®å®šå¥–åŠ±ç­‰çº§
2. æ ¹æ®ç­‰çº§èŽ·å–ç‰©å“æ•°é‡N
3. å¾ªçŽ¯Næ¬¡ï¼š
   a. æŽ·éª°å­å†³å®šç¨€æœ‰åº¦ï¼ˆæ™®é€š/ç¨€æœ‰/å²è¯—ï¼‰
   b. ä»Žå¯¹åº”ç‰©å“æ± éšæœºæŠ½å–ä¸€ä¸ªç‰©å“
   c. æ·»åŠ åˆ°å¥–åŠ±åˆ—è¡¨
4. è¿”å›žå¥–åŠ±åˆ—è¡¨
```

---

## äº”ã€èƒŒåŒ…ç³»ç»ŸåŽŸç†

### 5.1 èƒŒåŒ…æ•°æ®ç»“æž„

```
èƒŒåŒ… = ç‰©å“æ§½ä½çš„é›†åˆ

æ¯ä¸ªæ§½ä½ï¼š
  - ç‰©å“IDï¼ˆitem_idï¼‰
  - æ•°é‡ï¼ˆquantityï¼‰
  - èŽ·å–æ—¶é—´ï¼ˆobtained_atï¼‰
```

### 5.2 ç‰©å“å­˜å…¥è§„åˆ™

```
å½“èŽ·å¾—ä¸€ä¸ªç‰©å“æ—¶ï¼š
  1. æ£€æŸ¥èƒŒåŒ…ä¸­æ˜¯å¦å·²æœ‰è¯¥ç‰©å“
  2. å¦‚æžœæœ‰ â†’ æ•°é‡ +1
  3. å¦‚æžœæ²¡æœ‰ â†’ åˆ›å»ºæ–°æ§½ä½
```

### 5.3 èƒŒåŒ…å®¹é‡ï¼ˆå¯é€‰ï¼‰

```
èƒŒåŒ…æœ€å¤§å®¹é‡ï¼š100ä¸ªæ§½ä½
æ¯ä¸ªæ§½ä½æœ€å¤§å †å ï¼š99ä¸ª

å¦‚æžœèƒŒåŒ…æ»¡äº†ï¼š
  - æç¤º"èƒŒåŒ…å·²æ»¡"
  - ç‰©å“æš‚å­˜åˆ°"å¾…é¢†å–"åŒºåŸŸ
```

---

## å…­ã€æ•°æ®åº“è®¾è®¡

### 6.1 è¡¨ç»“æž„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    exploration_sessions                      â”‚
â”‚  è®°å½•æ¯æ¬¡æŽ¢ç´¢çš„å®Œæ•´æ•°æ®                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id, user_id, start_time, end_time, duration                â”‚
â”‚  start_lat, start_lng, end_lat, end_lng                     â”‚
â”‚  total_distance, reward_tier, items_rewarded, status        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ æŽ¢ç´¢èŽ·å¾—çš„ç‰©å“å­˜å…¥
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      inventory_items                         â”‚
â”‚  çŽ©å®¶èƒŒåŒ…ä¸­çš„ç‰©å“                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id, user_id, item_id, quantity, obtained_at                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ å¼•ç”¨ç‰©å“å®šä¹‰
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      item_definitions                        â”‚
â”‚  ç‰©å“çš„é™æ€å®šä¹‰ï¼ˆå¯ä»¥ç”¨ä»£ç å¸¸é‡ä»£æ›¿ï¼‰                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  id, name, description, icon, rarity, category, weight      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å…³é”®æ“ä½œ

| æ“ä½œ | è¯´æ˜Ž |
|-----|------|
| å¼€å§‹æŽ¢ç´¢ | åˆ›å»º exploration_sessionï¼Œstatus='active' |
| ç»“æŸæŽ¢ç´¢ | æ›´æ–° session çš„ end_time, distance, items |
| å­˜å…¥èƒŒåŒ… | INSERT æˆ– UPDATE inventory_items |
| æŸ¥è¯¢èƒŒåŒ… | SELECT * FROM inventory_items WHERE user_id=? |

---

## ä¸ƒã€å‰ç«¯æž¶æž„

### 7.1 æ¨¡å—åˆ’åˆ†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ExplorationManager                       â”‚
â”‚  èŒè´£ï¼šç®¡ç†æŽ¢ç´¢çŠ¶æ€ã€GPSè¿½è¸ªã€è·ç¦»è®¡ç®—ã€æ—¶é•¿è®¡æ—¶                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - startExploration()     å¼€å§‹æŽ¢ç´¢                           â”‚
â”‚  - stopExploration()      ç»“æŸæŽ¢ç´¢                           â”‚
â”‚  - currentDistance        å½“å‰ç´¯è®¡è·ç¦»                        â”‚
â”‚  - currentDuration        å½“å‰æŽ¢ç´¢æ—¶é•¿                        â”‚
â”‚  - isExploring            æ˜¯å¦æ­£åœ¨æŽ¢ç´¢                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ æŽ¢ç´¢ç»“æŸæ—¶è°ƒç”¨
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RewardGenerator                         â”‚
â”‚  èŒè´£ï¼šæ ¹æ®è·ç¦»ç”Ÿæˆå¥–åŠ±ç‰©å“                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - generateReward(distance) â†’ [RewardItem]                  â”‚
â”‚  - calculateTier(distance) â†’ RewardTier                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ ç”Ÿæˆçš„ç‰©å“å­˜å…¥
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      InventoryManager                        â”‚
â”‚  èŒè´£ï¼šç®¡ç†èƒŒåŒ…æ•°æ®ï¼Œä¸Žæ•°æ®åº“åŒæ­¥                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - addItems([Item])       æ·»åŠ ç‰©å“åˆ°èƒŒåŒ…                      â”‚
â”‚  - getInventory()         èŽ·å–èƒŒåŒ…å†…å®¹                        â”‚
â”‚  - removeItem(id, qty)    ç§»é™¤ç‰©å“                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 æ•°æ®æµ

```
ç”¨æˆ·ç‚¹å‡»"æŽ¢ç´¢"
       â”‚
       â–¼
ExplorationManager.startExploration()
       â”‚
       â”œâ”€â†’ å¼€å§‹GPSè¿½è¸ª
       â”œâ”€â†’ å¼€å§‹è®¡æ—¶å™¨
       â””â”€â†’ UIæ›´æ–°ä¸º"æŽ¢ç´¢ä¸­"çŠ¶æ€

       ... æŽ¢ç´¢è¿›è¡Œä¸­ ...

ç”¨æˆ·ç‚¹å‡»"ç»“æŸæŽ¢ç´¢"
       â”‚
       â–¼
ExplorationManager.stopExploration()
       â”‚
       â”œâ”€â†’ åœæ­¢GPSè¿½è¸ª
       â”œâ”€â†’ åœæ­¢è®¡æ—¶å™¨
       â”œâ”€â†’ èŽ·å–æœ€ç»ˆè·ç¦»å’Œæ—¶é•¿
       â”‚
       â–¼
RewardGenerator.generateReward(distance)
       â”‚
       â””â”€â†’ è¿”å›žç‰©å“åˆ—è¡¨
       â”‚
       â–¼
InventoryManager.addItems(items)
       â”‚
       â””â”€â†’ ç‰©å“å­˜å…¥æ•°æ®åº“
       â”‚
       â–¼
æ˜¾ç¤ºæŽ¢ç´¢ç»“æžœé¡µé¢
```

---

*è¡Œèµ°æŽ¢ç´¢å¥–åŠ±åŠŸèƒ½æ–¹æ¡ˆ v1.0*
